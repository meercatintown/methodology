{% extends 'base/base.html' %}

{% block title %}Add Step | {% endblock %}

{% block content %}

<nav class="breadcrumb" aria-label="breadcrumbs">
    <ul>
        <li><a href="#">Dashboard</a></li>
        <li><a href="#">Methodology</a></li>
        <li class="is-active"><a href="#" aria-label="page">Add Step</a></li>
    </ul>
</nav>

<div class="columns" id="step-app">
    <div class="column is-4">
        <h1 class="title">Add Step</h1>
    </div>
</div>

<div class="columns">
    <div class="column is-4">Add Step</div>
        <form action="." method="post" @submit="validateForm">
            {% csrf_token %}

            <div class="field">
                <label>Title</label>

                <div class="control">
                    <input type="text" name="title" id="id_title" v-model="title">
                </div>
            </div>

            <div class="field">
                <label>Step Number</label>

                <div class="control">
                    <input type="text" name="step_number" id="id_step_number" v-model="step_number">
                </div>
            </div>

            <div class="field">
                <label>Description</label>

                <div class="control">
                    <input type="text" name="description" id="id_description" v-model="description">
                </div>
            </div>

            <div class="field">
                <div class="control">
                    <button class="button is-success">Submit</button>
                </div>
            </div>
        </form>
    </div>

{% endblock %}

{% block scripts %}
<script>
    const StepApp = {
        data() {
            return {
                title: '',
                step_number: '',
                description: '',
                errors: []
            }
        },
        delimiters: ['[[,]]'],
        methods: {
            validateForm(e) {
                this.errors = []

                if(this.title) {
                    return true
                }

                if(this.step_number) {
                    return true
                }

                if(this.description) {
                    return true
                }

                e.preventDefault()

                this.errors.push('The title is missing')

                return false
            }
        }
    }

    Vue.createApp(StepApp).mount('#step-app')
</script>

{% endblock scripts %}